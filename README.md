# QSCIM - Front End

**QSCIM** is an application that provides a simple interface to build connectors to multiple services, such as `LDAP`, `MongoDB`, etc. In addition, it is also possible to create interceptors for each connector and forms to fetch an specific request more easily.

> If you are using the Visual Studio Code Editor, you can enhance your experience reading the documentation by using [Github Markdown Preview](https://marketplace.visualstudio.com/items?itemName=bierner.github-markdown-preview) extension extension.

<div style="display: inline_block margin-bottom: 4px"><br>
  <img  align="center" alt="Next" height="30" width="40"  src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nextjs/nextjs-original-wordmark.svg" />
  <img align="center" alt="React" height="30" width="40" src="https://raw.githubusercontent.com/devicons/devicon/master/icons/react/react-original.svg">
  <img align="center" alt="TS" height="30" width="40"  src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" />
</div>

---

## Links

- [Miro](https://miro.com/welcomeonboard/bWF6S3YwQ3lDdGI4ZW1zdlJsRVF3Z1E4RlBiN0FTZWh0SDRCZ1ZuV1lwak9rRFk1bTl4ZHFsSXVJRm1HWG5OcnwzMDc0NDU3MzU5ODY5NjQxMDgxfDI=?share_link_id=68373904748)

---

## Environment Variables

To be able to run the application , you must have the .env file with the following environment variables.

```

API_URL = #Base URL of the API used by the application locally, specified as a string.
NEXT_PRIVATE_API_USERNAME = #Username for authentication with the API, specified as a string.
NEXT_PRIVATE_API_PASSWORD = #Password for authentication with the API, specified as a string.

WORKING_DIRECTORY = #The application's working directory, which must be specified as an empty string or with the full path to the directory.

NEXTAUTH_URL= #Application authentication URL, specified as a string.
NEXTAUTH_SECRET= #Secret key for encrypting authentication information, which can be specified as an empty string or a specific secret value.

NEXT_PRIVATE_DOCKER_NETWORK= name of docker network used in QSCIM container

NEXT_PRIVATE_QIAM_ID=: Identifier or username associated with the QIAM system, used for authentication and QIAM-related operations.

NEXT_PRIVATE_QIAM_REALM=: Defines the QIAM realm to which the application will connect, representing an isolated security area.

NEXT_PRIVATE_QIAM_URL=: Defines the base URL of the QIAM server used for authentication and identity management.

NEXT_PRIVATE_QIAM_SECRET=: Contains the secret used to authenticate the application to the QIAM server.

NEXT_PRIVATE_QIAM_ISSUER=: Defines the issuer for JWT tokens generated by QIAM for the specific realm, used to verify the authenticity of tokens.

NEXT_PRIVATE_QIAM_CLIENT_TOKEN_URL=: URL used to request access tokens from the QIAM server for authenticating the application.

NEXT_PRIVATE_QIAM_REALM_URL=: Defines the URL that points to the realm administration panel on the QIAM server, used to manage realm-related settings.


```

---

## :runner: Running the project locally

To run the project execute the following commands in the terminal:

     nvm use 18.15.0
     npm install
     npm run dev

**NOTE:** To run the project properly, please make sure that your `node` package version is in `18.15.0` and your **environment variables** such as `API_URL` are set correctly.

---

## :cloud: Building and deploying the project

To build the project execute the following commands in the terminal:

      nvm use 18.15.0
      npm run build

---

## :file_folder: Folder structure

The project folder structure and its contents are listed below:

- **src**: root of project structure
  - **assets**: Theme and table columns definition
  - **components**: React components
  - **context**: React context
  - **data**: Default list and objects used in the application
  - **hooks**: Custom React hooks
  - **layouts**: Pages layouts (extracting smaller functions from a larger page)
  - **pages**: Next.js pages
  - **services**: Functions for fetching data from APIs
  - **styles**: Global styles
  - **types**: Typescript global types
  - **utils**: Utility functions
- **public**: public images

**NOTE**: For a more detailed explanation of each page in the application please see its own documentation available in its folder.

---

## :heavy_plus_sign: Add a new connector option

To add a new connector option, follow these steps:

- Add the new option to the list located at `/src/data/connectors.ts`
- Add a new form file at `/src/components/forms/connectors` and edit `index.tsx` to include the new option.
- Add the new config file logic at `/src/utils/writeFiles/functions/- writeConnectorConfig` and edit the `index.tsx` to include the new option.
- Add the edited version of `.js` lib file in the [extra files repo](https://github.com/qriar-labs/qscim-extra/tree/main/scimgateway/lib) to avoid **CORS errors** while using the forms.

---

## :lock: Private routes

In `/src/utils/authSession.tsx` there is a function called withAuth, used to check if the user is authenticated or not. To verify this information, the script will obtain the information provided by the cookies and, if the user is not authenticated, it will be redirected to the sign in page.

To make a route private, just use the function `withAuth` while exporting the page component. Here's an example:

```typescript
function HomePage(){...}

// making the home page private
export default withAuth(HomePage);
```
